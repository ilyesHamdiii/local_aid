<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - MutualAid</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }

      .login-container {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        width: 100%;
        max-width: 450px;
        position: relative;
        overflow: hidden;
      }

      .login-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(45deg, #667eea, #764ba2);
      }

      .logo {
        text-align: center;
        margin-bottom: 2rem;
      }

      .logo h1 {
        font-size: 2rem;
        font-weight: bold;
        color: #667eea;
        margin-bottom: 0.5rem;
      }

      .logo p {
        color: #666;
        font-size: 1rem;
      }

      .login-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .login-header h2 {
        font-size: 1.8rem;
        color: #333;
        margin-bottom: 0.5rem;
      }

      .login-header p {
        color: #666;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-group label {
        display: block;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: #333;
      }

      .form-group input {
        width: 100%;
        padding: 1rem;
        border: 2px solid #e1e5e9;
        border-radius: 10px;
        font-size: 1rem;
        font-family: inherit;
        transition: all 0.3s ease;
      }

      .form-group input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      }

      .form-group input:invalid {
        border-color: #dc3545;
      }

      .form-group input:valid {
        border-color: #28a745;
      }

      .form-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        font-size: 0.9rem;
      }

      .remember-me {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .remember-me input[type="checkbox"] {
        width: auto;
        margin: 0;
      }

      .forgot-password {
        color: #667eea;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .forgot-password:hover {
        color: #5a6fd8;
        text-decoration: underline;
      }

      .btn {
        width: 100%;
        padding: 1rem;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 1rem;
      }

      .btn-primary {
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
      }

      .btn-primary:active {
        transform: translateY(0);
      }

      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .divider {
        text-align: center;
        margin: 2rem 0;
        position: relative;
        color: #666;
      }

      .divider::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background: #e1e5e9;
        z-index: 1;
      }

      .divider span {
        background: white;
        padding: 0 1rem;
        position: relative;
        z-index: 2;
      }

      .social-login {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .btn-social {
        padding: 0.75rem;
        border: 2px solid #e1e5e9;
        background: white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-weight: 500;
        color: #333;
        text-decoration: none;
        transition: all 0.3s ease;
      }

      .btn-social:hover {
        border-color: #667eea;
        color: #667eea;
        transform: translateY(-2px);
      }

      .btn-google {
        border-color: #db4437;
        color: #db4437;
      }

      .btn-google:hover {
        background: #db4437;
        color: white;
      }

      .btn-facebook {
        border-color: #4267b2;
        color: #4267b2;
      }

      .btn-facebook:hover {
        background: #4267b2;
        color: white;
      }

      .signup-link {
        text-align: center;
        margin-top: 2rem;
        padding-top: 2rem;
        border-top: 1px solid #e1e5e9;
      }

      .signup-link a {
        color: #667eea;
        text-decoration: none;
        font-weight: 600;
      }

      .signup-link a:hover {
        text-decoration: underline;
      }

      .error-message {
        background: #f8d7da;
        color: #721c24;
        padding: 0.75rem;
        border-radius: 8px;
        margin-bottom: 1rem;
        font-size: 0.9rem;
        display: none;
      }

      .loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.9);
        display: none;
        align-items: center;
        justify-content: center;
        border-radius: 20px;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #e1e5e9;
        border-top: 4px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .back-to-home {
        position: absolute;
        top: 2rem;
        left: 2rem;
        background: rgba(255, 255, 255, 0.2);
        color: white;
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 25px;
        font-weight: 500;
        transition: all 0.3s ease;
      }

      .back-to-home:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-2px);
      }

      @media (max-width: 480px) {
        .login-container {
          padding: 2rem;
          margin: 1rem;
        }

        .social-login {
          grid-template-columns: 1fr;
        }

        .form-options {
          flex-direction: column;
          gap: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <a href="home.html" class="back-to-home">‚Üê Back to Home</a>

    <div class="login-container">
      <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
      </div>

      <div class="logo">
        <h1>MutualAid</h1>
        <p>Welcome back to your community</p>
      </div>

      <div class="login-header">
        <h2>Sign In</h2>
        <p>Access your account to help and get help from neighbors</p>
      </div>

      <div class="error-message" id="error-message"></div>

      <form id="login-form">
        <div class="form-group">
          <label for="email">Email Address</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            placeholder="Enter your email"
          />
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            placeholder="Enter your password"
          />
        </div>

        <div class="form-options">
          <div class="remember-me">
            <input type="checkbox" id="remember" name="remember" />
            <label for="remember">Remember me</label>
          </div>
          <a href="forgot-password.html" class="forgot-password"
            >Forgot password?</a
          >
        </div>

        <button type="submit" class="btn btn-primary" id="login-btn">
          Sign In
        </button>
      </form>

      <div class="divider">
        <span>Or continue with</span>
      </div>

      <div class="social-login">
        <a
          href="#"
          class="btn-social btn-google"
          onclick="socialLogin('google')"
        >
          <span>üî¥</span> Google
        </a>
        <a
          href="#"
          class="btn-social btn-facebook"
          onclick="socialLogin('facebook')"
        >
          <span>üîµ</span> Facebook
        </a>
      </div>

      <div class="signup-link">
        <p>Don't have an account? <a href="register.html">Sign up here</a></p>
      </div>
    </div>

    <script>
      // Form handling
      const loginForm = document.getElementById("login-form");
      const emailInput = document.getElementById("email");
      const passwordInput = document.getElementById("password");
      const loginBtn = document.getElementById("login-btn");
      const errorMessage = document.getElementById("error-message");
      const loadingOverlay = document.getElementById("loading-overlay");

      // Demo credentials
      const DEMO_CREDENTIALS = {
        "demo@mutualaid.com": "password123",
        "sarah@example.com": "hello123",
        "neighbor@community.org": "helper456",
      };

      loginForm.addEventListener("submit", async function (e) {
        e.preventDefault();

        const email = emailInput.value.trim();
        const password = passwordInput.value.trim();

        // Hide previous error
        hideError();

        // Basic validation
        if (!email || !password) {
          showError("Please fill in all fields.");
          return;
        }

        if (!isValidEmail(email)) {
          showError("Please enter a valid email address.");
          return;
        }

        // Show loading state
        showLoading(true);

        try {
          // Simulate API call
          await simulateLogin(email, password);

          // Success
          showSuccess();

          // Redirect after short delay
          setTimeout(() => {
            const urlParams = new URLSearchParams(window.location.search);
            const returnUrl = urlParams.get("return") || "browse.html";
            window.location.href = returnUrl;
          }, 1500);
        } catch (error) {
          showError(error.message);
        } finally {
          showLoading(false);
        }
      });

      async function simulateLogin(email, password) {
        // Simulate API delay
        await new Promise((resolve) => setTimeout(resolve, 1500));

        // Check demo credentials
        if (DEMO_CREDENTIALS[email] && DEMO_CREDENTIALS[email] === password) {
          return { success: true, user: { email } };
        }

        // For demo purposes, accept any valid email with password length > 6
        if (isValidEmail(email) && password.length >= 6) {
          return { success: true, user: { email } };
        }

        throw new Error(
          "Invalid email or password. Try demo@mutualaid.com / password123"
        );
      }

      function socialLogin(provider) {
        showLoading(true);

        // Simulate social login
        setTimeout(() => {
          showLoading(false);
          showSuccess();
          setTimeout(() => {
            window.location.href = "browse.html";
          }, 1500);
        }, 2000);
      }

      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.style.display = "block";
        errorMessage.scrollIntoView({ behavior: "smooth", block: "nearest" });
      }

      function hideError() {
        errorMessage.style.display = "none";
      }

      function showLoading(show) {
        if (show) {
          loadingOverlay.style.display = "flex";
          loginBtn.disabled = true;
        } else {
          loadingOverlay.style.display = "none";
          loginBtn.disabled = false;
        }
      }

      function showSuccess() {
        loginBtn.textContent = "Success! Redirecting...";
        loginBtn.style.background = "#28a745";
      }

      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      // Real-time validation feedback
      emailInput.addEventListener("input", function () {
        if (this.value && !isValidEmail(this.value)) {
          this.setCustomValidity("Please enter a valid email address");
        } else {
          this.setCustomValidity("");
        }
      });

      passwordInput.addEventListener("input", function () {
        if (this.value && this.value.length < 6) {
          this.setCustomValidity("Password must be at least 6 characters");
        } else {
          this.setCustomValidity("");
        }
      });

      // Show demo credentials helper
      function showDemoCredentials() {
        const demoInfo = document.createElement("div");
        demoInfo.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #333;
                color: white;
                padding: 1rem;
                border-radius: 10px;
                font-size: 0.8rem;
                max-width: 250px;
                z-index: 1000;
            `;
        demoInfo.innerHTML = `
                <strong>Demo Login:</strong><br>
                Email: demo@mutualaid.com<br>
                Password: password123<br>
                <button onclick="this.parentElement.remove()" style="background: none; border: none; color: white; float: right; cursor: pointer;">√ó</button>
            `;
        document.body.appendChild(demoInfo);
      }

      // Show demo info after 3 seconds
      setTimeout(showDemoCredentials, 3000);

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (e.key === "Enter" && (e.ctrlKey || e.metaKey)) {
          loginForm.dispatchEvent(new Event("submit"));
        }
      });
    </script>
  </body>
</html>
